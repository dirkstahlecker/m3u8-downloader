 #! /usr/bin/env bash

videoPath=$1
audioPath=$2

if [ $3 != "" ]; then
	outputPath=$3
else
	outputPath=output.mp4
fi

echo $videoPath
echo $audioPath
echo $outputPath

videoTempPath=video.mp4
audioTempPath=audio.ts

#get video
ffmpeg -i $videoPath -c copy video.mp4 > /dev/null 2>&1
wait

#get audio
ffmpeg -i $audioPath -c copy -map a audio.ts > /dev/null 2>&1
wait

#combine
ffmpeg -i $videoTempPath -i $audioTempPath -c:v copy -c:a aac $outputPath > /dev/null 2>&1
wait

#clean up
rm $videoTempPath
rm $audioTempPath

echo "done"